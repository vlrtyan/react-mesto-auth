{"ast":null,"code":"import _toConsumableArray from\"/Users/vlrtyan/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/vlrtyan/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{BrowserRouter,Route,Switch,Redirect}from'react-router-dom';import ProtectedRoute from'./ProtectedRoute.js';import Header from'./Header.js';import Main from'./Main.js';import Footer from'./Footer.js';import Login from'./Login.js';import Register from'./Register.js';import InfoTooltip from'./InfoTooltip.js';import ImagePopup from'./ImagePopup.js';import EditProfilePopup from'./EditProfilePopup.js';import EditAvatarPopup from'./EditAvatarPopup.js';import AddPlacePopup from'./AddPlacePopup.js';import CurrentUserContext from'../contexts/CurrentUserContext.js';import{api}from'../utils/Api.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditAvatarPopupOpen=_React$useState2[0],setEditAvatarPopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isEditProfilePopupOpen=_React$useState4[0],setEditProfilePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isAddPlacePopupOpen=_React$useState6[0],setAddPlacePopupOpen=_React$useState6[1];var _React$useState7=React.useState({}),_React$useState8=_slicedToArray(_React$useState7,2),selectedCard=_React$useState8[0],setSelectedCard=_React$useState8[1];var _React$useState9=React.useState([]),_React$useState10=_slicedToArray(_React$useState9,2),cards=_React$useState10[0],setCards=_React$useState10[1];var _React$useState11=React.useState({}),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setCurrentUser=_React$useState12[1];var handleEditAvatarClick=function handleEditAvatarClick(){setEditAvatarPopupOpen(true);};var handleEditProfileClick=function handleEditProfileClick(){setEditProfilePopupOpen(true);};var handleAddPlaceClick=function handleAddPlaceClick(){setAddPlacePopupOpen(true);};var handleCardClick=function handleCardClick(card){setSelectedCard(card);};var closeAllPopups=function closeAllPopups(){setEditAvatarPopupOpen(false);setEditProfilePopupOpen(false);setAddPlacePopupOpen(false);setSelectedCard({});};var handleUpdateUser=function handleUpdateUser(_ref){var name=_ref.name,about=_ref.about;api.editUserData({name:name,about:about}).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){return console.log(err);});};var handleUpdateAvatar=function handleUpdateAvatar(_ref2){var avatar=_ref2.avatar;api.changeAvatar({avatar:avatar}).then(function(res){setCurrentUser(res);closeAllPopups();}).catch(function(err){return console.log(err);});};var handleCardLike=function handleCardLike(card){var isLiked=card.likes.some(function(like){return like._id===currentUser._id;});// отправить запрос в API и обновить данные карточки\napi.changeLikeCardStatus(card,isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){return console.log(err);});};var handleCardDelete=function handleCardDelete(card){api.deleteCard(card).then(function(){setCards(function(state){return state.filter(function(c){return c._id!==card._id;});});}).catch(function(err){return console.log(err);});};var handleAddPlaceSubmit=function handleAddPlaceSubmit(newCard){api.addNewItem(newCard).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){return console.log(err);});};React.useEffect(function(){api.getUserData().then(function(userData){return setCurrentUser(userData);}).catch(function(err){return console.log(err);});},[]);React.useEffect(function(){api.getInitialCards().then(function(res){setCards(res);}).catch(function(err){return console.log(err);});},[]);return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(BrowserRouter,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Route,{path:\"/signin\",children:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",children:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsxs(ProtectedRoute,{path:\"/\",children:[/*#__PURE__*/_jsx(Main,{cards:cards,onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onCardClick:handleCardClick,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(Footer,{})]}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit})]}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups})]})});}export default App;","map":{"version":3,"sources":["/Users/vlrtyan/dev/react-mesto-auth/src/components/App.js"],"names":["React","BrowserRouter","Route","Switch","Redirect","ProtectedRoute","Header","Main","Footer","Login","Register","InfoTooltip","ImagePopup","EditProfilePopup","EditAvatarPopup","AddPlacePopup","CurrentUserContext","api","App","useState","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","selectedCard","setSelectedCard","cards","setCards","currentUser","setCurrentUser","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardClick","card","closeAllPopups","handleUpdateUser","name","about","editUserData","then","res","catch","err","console","log","handleUpdateAvatar","avatar","changeAvatar","handleCardLike","isLiked","likes","some","like","_id","changeLikeCardStatus","newCard","state","map","c","handleCardDelete","deleteCard","filter","handleAddPlaceSubmit","addNewItem","useEffect","getUserData","userData","getInitialCards"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { BrowserRouter, Route, Switch, Redirect } from 'react-router-dom';\nimport ProtectedRoute from './ProtectedRoute.js';\n\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport ImagePopup from './ImagePopup.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\nimport CurrentUserContext from '../contexts/CurrentUserContext.js';\nimport { api } from '../utils/Api.js';\n\nfunction App() {\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n\n  const [currentUser, setCurrentUser] = React.useState({});\n\n  const handleEditAvatarClick = () => {\n    setEditAvatarPopupOpen(true);\n  }\n  const handleEditProfileClick = () => {\n    setEditProfilePopupOpen(true);\n  }\n  const handleAddPlaceClick = () => {\n    setAddPlacePopupOpen(true);\n  }\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  }\n  const closeAllPopups = () => {\n    setEditAvatarPopupOpen(false);\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setSelectedCard({});\n  }\n  const handleUpdateUser = ({ name, about }) => {\n    api.editUserData({ name, about })\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err))\n  }\n  const handleUpdateAvatar = ({ avatar }) => {\n    api.changeAvatar({ avatar })\n      .then((res) => {\n        setCurrentUser(res);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err))\n  }\n\n  const handleCardLike = (card) => {\n    const isLiked = card.likes.some(like => like._id === currentUser._id);\n    // отправить запрос в API и обновить данные карточки\n    api.changeLikeCardStatus(card, isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch(err => console.log(err));\n  }\n\n  const handleCardDelete = (card) => {\n    api.deleteCard(card)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n      })\n      .catch(err => console.log(err));\n  }\n\n  const handleAddPlaceSubmit = (newCard) => {\n    api.addNewItem(newCard)\n      .then((newCard) => {\n        setCards([newCard, ...cards])\n        closeAllPopups()\n      })\n      .catch(err => console.log(err))\n\n  }\n\n  React.useEffect(() => {\n    api.getUserData()\n      .then(userData => setCurrentUser(userData))\n      .catch(err => console.log(err))\n  }, [])\n\n  React.useEffect(() => {\n    api.getInitialCards()\n      .then((res) => {\n        setCards(res);\n      })\n      .catch((err) => console.log(err))\n  }, [])\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <BrowserRouter>\n        <div className=\"page\">\n          <Header />\n          <Route path=\"/signin\">\n            <Login />\n          </Route>\n          <Route path=\"/signup\">\n            <Register />\n          </Route>\n\n          <ProtectedRoute path=\"/\">\n            <Main\n              cards={cards}\n              onEditAvatar={handleEditAvatarClick}\n              onEditProfile={handleEditProfileClick}\n              onAddPlace={handleAddPlaceClick}\n              onCardClick={handleCardClick}\n              onCardLike={handleCardLike}\n              onCardDelete={handleCardDelete}\n            />\n            <Footer />\n            </ProtectedRoute>\n\n\n          {/* попап редактирования профиля */}\n          <EditProfilePopup\n            isOpen={isEditProfilePopupOpen}\n            onClose={closeAllPopups}\n            onUpdateUser={handleUpdateUser}\n          />\n\n          {/* попап редактирования аватара */}\n          <EditAvatarPopup\n            isOpen={isEditAvatarPopupOpen}\n            onClose={closeAllPopups}\n            onUpdateAvatar={handleUpdateAvatar}\n          />\n\n          {/* попап добавления карточки */}\n          <AddPlacePopup\n            isOpen={isAddPlacePopupOpen}\n            onClose={closeAllPopups}\n            onAddPlace={handleAddPlaceSubmit}\n          />\n\n          {/* <InfoTooltip \n          isOpen=\"true\"\n          /> */}\n\n        </div>\n\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups}\n        />\n\n\n      </BrowserRouter>\n    </CurrentUserContext.Provider>\n  )\n}\n\nexport default App"]},"metadata":{},"sourceType":"module"}